<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Example 8 — transform: matrix() (Figure 12-10 and 12-11)</title>
<style>
/* Example 8 — transform: matrix() (Figure 12-10 and 12-11) */
/* From Beginning HTML5 and CSS3 — The Web Evolved http://thewebevolved.com/ */
/* Comment out transition while editing CSS ;) */
body {
	width: 80%;
	max-width: 42em;
	margin: auto;
	font: 1em/1.5 Georgia, serif;
}
h1,
h2 {
	font-weight: normal;
}
hr,
footer {
	margin: 2.5em 0;
}
pre {
	-moz-tab-size: 2;
	-o-tab-size: 2;
	tab-size: 2;
}
pre,
code,
samp,
var {
	word-wrap: break-word;
	white-space: pre-wrap;
}
figure {
	margin-left: 0;
	margin-right: 0;
}
figcaption {
	clear: left;
	padding-top: 1.5em;
}

</style>
</head>
<body>
<h1>Example 8 — transform: matrix() (Figure 12-10 and 12-11)</h1>

<h2>As a chained transform</h2>
<pre><code>div {transform: translate(50px, -24px) rotate(180deg) scale(.5) skew(0, 22.5deg);}</code></pre>

<div id="matrix1">
<style scoped>
#matrix1 div {
  width: 100px;
  height: 100px;
  border: 3px solid #000;
  border-radius: .5em;
  background: #fff;
  -webkit-transition: all 1s;
     -moz-transition: all 1s;
      -ms-transition: all 1s;
       -o-transition: all 1s;
          transition: all 1s;
}

#matrix1 div {
-webkit-transform: translate(50px,-24px) rotate(180deg) scale(.5) skew(0,22.5deg);
   -moz-transform: translate(50px,-24px) rotate(180deg) scale(.5) skew(0,22.5deg);
    -ms-transform: translate(50px,-24px) rotate(180deg) scale(.5) skew(0,22.5deg);
     -o-transform: translate(50px,-24px) rotate(180deg) scale(.5) skew(0,22.5deg);
        transform: translate(50px,-24px) rotate(180deg) scale(.5) skew(0,22.5deg);
}
#matrix1:hover div {
-webkit-transform: translate(0,0) rotate(0) scale(1) skew(0,0);
   -moz-transform: translate(0,0) rotate(0) scale(1) skew(0,0);
    -ms-transform: translate(0,0) rotate(0) scale(1) skew(0,0);
     -o-transform: translate(0,0) rotate(0) scale(1) skew(0,0);
        transform: translate(0,0) rotate(0) scale(1) skew(0,0);
}
</style>
<div></div>
</div>
<figcaption>applying multiple transforms — if animated the rotation between <code>rotate(0)</code> and <code>rotate(180deg)</code> is clockwise</figcaption>
</figure>

<!-- 
rotate(66)
.4 .91 0
-.91 .4 0
0 0 1

skew(15)
1 0 0
.27 1 0
0 0 1
 -->

<!-- 
translate(50px, -24px)
1 0 50
0 1 -24
0 0 1

rotate(180deg)
-1 -0 0
.001 -1 0
0 0 1

=
-1 -0 50
.001 -1 -24
0 0 1

scale(.5)
.5 0 0
0 .5 0
0 0 1

=
-.5 -0 50
.001 -.5 -24
0 0 1

skewY(22.5deg)
1 0 0
.4212 1 0
0 0 1

=
-.5 -0 50
-.212 -.5 -24
0 0 1
= -.5,-.207,-0,-.5,50,-24
 -->

<h2>As a transformation matrix</h2>

<p>However, if you’re familiar with multiplying matrices together, or use a conversion tool like Eric Meyer and Aaron Gustafson’s <a href="http://meyerweb.com/eric/tools/matrix/" title="The Matrix Resolutions">The Matrix Resolutions</a>, you could use <code>transform: matrix();</code> to write that shorthand, as in figure 11:</p>

<figure>

<aside class="sidenote"><p>We’ve included vendor-prefixed CSS to show <code>px</code> units on translations for Firefox.<!-- You can also include a unitless version for -moz- under this, making the px version a fallback --></p></aside>
<pre class="callout"><code>div {
  -webkit-transform: matrix(-.5,-.207,0,-.5,50,-24);
     -moz-transform: matrix(-.5,-.207,0,-.5,50<mark>px</mark>,-24<mark>px</mark>);
      -ms-transform: matrix(-.5,-.207,0,-.5,50,-24);
       -o-transform: matrix(-.5,-.207,0,-.5,50,-24);
          transform: matrix(-.5,-.207,0,-.5,50,-24);
}</code></pre>

<div id="matrix2">
<style scoped>
#matrix2 div {
  width: 100px;
  height: 100px;
  border: 3px solid #000;
  border-radius: .5em;
  background: #fff;
  -webkit-transition: all 1s;
     -moz-transition: all 1s;
      -ms-transition: all 1s;
       -o-transition: all 1s;
          transition: all 1s;
}
#matrix2 div {
  -webkit-transform: matrix(-.5,-.207,0,-.5,50,-24);
     -moz-transform: matrix(-.5,-.207,0,-.5,50px,-24px);
      -ms-transform: matrix(-.5,-.207,0,-.5,50,-24);
       -o-transform: matrix(-.5,-.207,0,-.5,50,-24);
          transform: matrix(-.5,-.207,0,-.5,50,-24);
}
#matrix2:hover div {
  -webkit-transform: matrix(1,0,0,1,0,0);
     -moz-transform: matrix(1,0,0,1,0,0);
      -ms-transform: matrix(1,0,0,1,0,0);
       -o-transform: matrix(1,0,0,1,0,0);
          transform: matrix(1,0,0,1,0,0);
}

</style>
<div></div>
</div>
<figcaption>Applying the same transformations via <code>matrix()</code>, only the rotation is now anti-clockwise if animated.</figcaption>
</figure>

<hr />

<p><a href="http://dev.w3.org/csswg/css3-3d-transforms/#transform-functions" title="CSS 3D Transforms">3D transform matrices</a> are even more exciting, making up a “4x4 homogeneous matrix of 16 values in column-major order”. As an example of how exciting, here’s what <code>rotate3d()</code> looks like as a 3D matrix:</p>

<p class="callout"><code>transform: matrix3d(1 + (1-cos(angle))*(x*x-1), -z*sin(angle)+(1-cos(angle))*x*y, y*sin(angle)+(1-cos(angle))*x*z, 0, z*sin(angle)+(1-cos(angle))*x*y, 1 + (1-cos(angle))*(y*y-1), -x*sin(angle)+(1-cos(angle))*y*z, 0, -y*sin(angle)+(1-cos(angle))*x*z, x*sin(angle)+(1-cos(angle))*y*z, 1 + (1-cos(angle))*(z*z-1), 0, 0, 0, 0, 1);</code></p>

<hr />

<ul>
	<li><a href="http://dev.w3.org/csswg/css3-2d-transforms/#transform-functions" title="CSS 2D Transforms">CSS 2D Transforms Module Level 3 — Transformation Functions</a></li>
	<li><a href="http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/" title="The CSS3 matrix() Transform for the Mathematically Challenged">The CSS3 matrix() Transform for the Mathematically Challenged</a>, by Zoltan “Du Lac” Hawryluk</li>
	<li><a href="http://en.wikipedia.org/wiki/Transformation_matrix#Examples_in_2D_graphics" title="Transformation matrix - Wikipedia, the free encyclopedia">Wikipedia on transformation matrices</a></li>
	<li><a href="http://dabblet.com/gist/4182419" title="dabblet.com">This example on Dabblet</a></li>
</ul>

<footer>From <a href="http://thewebevolved.com/"><cite>Beginning HTML5 and CSS3 — The Web Evolved</cite></a>, Chapter 12</footer>

</body>
</html>